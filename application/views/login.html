<div class="row justify-content-center">
  <div class="col-md-5">
    <h3>Login</h3>
    <div id="alert"></div>
    <form id="loginForm">
      <div class="form-group">
        <label>Email</label>
        <input type="email" name="email" id="email" class="form-control" required>
      </div>
      <div class="form-group">
        <label>Password</label>
        <input type="password" name="password" id="password" class="form-control" required>
      </div>
      <button class="btn btn-primary">Login</button>
    </form>
  </div>
</div>

<script>
$(function(){
  $('#loginForm').on('submit', function(e){
    e.preventDefault();
    var data = { email: $('#email').val(), password: $('#password').val() };
    $.post('<?= site_url("ajax/login") ?>', data, function(res){
      if(res.status === 'success'){
        window.location = res.redirect;
      } else {
        $('#alert').html('<div class="alert alert-danger">'+res.message+'</div>');
      }
    }, 'json').fail(function(){ $('#alert').html('<div class="alert alert-danger">Server error</div>'); });
  });
});
</script>
